{
  "version": 3,
  "sources": ["../../src/content/sources.js", "../../src/content/domService.js", "../../src/content/biasEvaluator.js", "../../src/shared/browserAPI.js", "../../src/content/messaging.js", "../../src/content/contentScript.js"],
  "sourcesContent": ["var sources = {\n    // Allmost all ratings are from AllSides.\n    // Center-left & center-right media are\n    // listed as \"center\" in low confidence\n    // cases for the benefit of the doubt.\n\n    // Some British media ratings are from\n    // \"How Press Propaganda Paved the Way for Brexit\" p. 65\n\n    \"BBC\": {\n        url: \"bbc.com\",\n        bias: \"center\"\n    },\n    \"Reuters\": {\n        url: \"reuters.com\",\n        bias: \"center\"\n    },\n    \"Time\": {\n        url: \"time.com\",\n        bias: \"center\"\n    },\n    \"Public Broadcast Service\": {\n        url: \"pbs.org\",\n        bias: \"center\"\n    },\n    \"NBC News\": {\n        url: \"nbcnews.com\",\n        bias: \"center\"\n    },\n    \"CNBC News\": {\n        url: \"cnbcnews.com\",\n        bias: \"center\"\n    },\n    \"CNBC\": {\n        url: \"cnbc.com\",\n        bias: \"center\"\n    },\n    \"ABC News\": {\n        url: \"abcnews.go.com\",\n        bias: \"center\"\n    },\n    \"Foreign Policy\": {\n        url: \"foreignpolicy.com\",\n        bias: \"center\"\n    },\n    \"USA Today\": {\n        url: \"usatoday.com\",\n        bias: \"center\"\n    },\n    \"CBS News\": {\n        url: \"cbsnews.com\",\n        bias: \"center\"\n    },\n    \"The Hill\": {\n        url: \"thehill.com\",\n        bias: \"center\"\n    },\n    \"Financial Times\": {\n        url: \"ft.com\",\n        bias: \"center\"\n    },\n    \"Bussiness Insider\": {\n        url: \"businessinsider.com\",\n        bias: \"center\",\n    },\n    \"Bloomberg\": {\n        url: \"bloomberg.com\",\n        bias: \"center\"\n    },\n    \"Los Angeles Times\": {\n        url: \"latimes.com\",\n        bias: \"center\"\n    },\n    \"Wired\": {\n        url: \"wired.com\",\n        bias: \"center\"\n    },\n    \"Associated Press\": {\n        url: \"apnews.com\",\n        bias: \"center\"\n    },\n    \"The Conversation\": {\n        url: \"theconversation.com\",\n            bias: \"center\"\n    },\n    \"The Week\": {\n        url: \"theweek.com\",\n        bias: \"center\"\n    },\n    \"Forbes\": {\n        url: \"forbes.com\",\n        bias: \"center\"\n    },\n    \"Wall Street Journal\": {\n        url: \"wsj.com\",\n        bias: \"center\"\n    },\n    \"Vanity Fair\": {\n        url: \"vanityfair.com\",\n        bias: \"center left\"\n    },\n    \"New York Times\": {\n        url: \"nytimes.com\",\n        bias: \"center left\"\n    },\n    \"Washington Post\": {\n        url: \"washingtonpost.com\",\n        bias: \"center left\"\n    },\n    \"CNN\": {\n        url: \"cnn.com\",\n        bias: \"center left\"\n    },\n    \"The Guardian\": {\n        url: \"theguardian.com\",\n        bias: \"center left\"\n    },\n    \"The Independent\": {\n        url: \"independent.co.uk\",\n        bias: \"center left\"\n    },\n    \"Politico\": {\n        url: \"politico.com\",\n        bias: \"center left\"\n    },\n    \"National Public Radio\": {\n        url: \"npr.org\",\n        bias: \"center left\"\n    },\n    \"Huffington Post\": {\n        url: \"huffpost.com\",\n        bias: \"left\"\n    },\n    \"Vox\": {\n        url: \"vox.com\",\n        bias: \"left\"\n    },\n    \"The Atlantic\": {\n        url: \"theatlantic.com\",\n        bias: \"left\"\n    },\n    \"Slate\": {\n        url: \"slate.com\",\n        bias: \"left\"\n    },\n    \"The New Yorker\": {\n        url: \"newyorker.com\",\n        bias: \"left\"\n    },\n    \"Daily Beast\": {\n        url: \"thedailybeast.com\",\n        bias: \"left\"\n    },\n    \"New York Magazine\": {\n        url: \"nymag.com\",\n        bias: \"left\"\n    },\n    \"Vice News\": {\n        url: \"vice.com\",\n        bias: \"left\"\n    },\n    \"MSNBC\": {\n        url: \"msnbc.com\",\n        bias: \"left\"\n    },\n    \"BuzzFeed News\": {\n        url: \"buzzfeednews.com\",\n        bias: \"left\"\n    },\n    \"Fox News\": {\n        url: \"foxnews.com\",\n        bias: \"center right\"\n    },\n    \"New York Post\": {\n        url: \"nypost.com\",\n        bias: \"center right\"\n    },\n    \"Washington Times\": {\n        url: \"washingtontimes.com\",\n        bias: \"center right\"\n    },\n    \"The Sun\": {\n        url: \"thesun.co.uk\",\n        bias: \"center right\"\n    },\n    \"Daily Wire\": {\n        url: \"dailywire.com\",\n        bias: \"right\"\n    },\n    \"Federalist\": {\n        url: \"thefederalist.com\",\n        bias: \"right\"\n    },\n    \"Reason\": {\n        url: \"reason.com\",\n        bias: \"right\"\n    },\n    \"National Review\": {\n        url: \"nationalreview.com\",\n        bias: \"right\"\n    }\n}", "export function getArticleTitle() {\n    const el = document.getElementById(\"firstHeading\").firstChild.textContent;;\n    return el ? el.textContent.trim() : \"UNDEFINED\";\n}\n\nexport function getReferences() {\n    const collection = document.getElementsByClassName(\"reference\");\n    const referenceArray = [[]];\n    let j = 0;\n\n    for (let i = 0; i < collection.length; i++) {\n        referenceArray[j].push(collection[i]);\n        if (!collection[i].nextSibling || collection[i].nextSibling.nodeName !== \"SUP\") {\n            j++;\n            referenceArray[j] = [];\n        }\n    }\n    return referenceArray;\n}\n\nexport function colorizeCitation(element, bias) {\n    let color = { left: \"#ca9ffc\", center: \"#ffde72\", right: \"#fc8a9b\" }[bias] || \"#fff\";\n    for (let prev = element.previousSibling; prev && prev.nodeName !== \"SUP\"; prev = prev.previousSibling) {\n        if (prev.nodeName === \"#text\") {\n            const span = document.createElement(\"span\");\n            span.style.backgroundColor = color;\n            span.textContent = prev.textContent;\n            prev.parentNode.replaceChild(span, prev);\n        } else {\n            prev.style.backgroundColor = color;\n        }\n    }\n}\n", "import sources from \"./sources.js\";\nimport { colorizeCitation } from \"./domService.js\";\n\nexport class BiasEvaluator {\n    constructor() {\n        this.countLeft = 0;\n        this.countCenterLeft = 0;\n        this.countCenter = 0;\n        this.countCenterRight = 0;\n        this.countRight = 0;\n    }\n\n    evaluateReferences(referenceGroups) {\n        referenceGroups.forEach((group, index) => {\n            try {\n                this.evaluateGroup(group);\n            } catch (err) {\n                console.error(`Error evaluating group ${index}:`, err);\n            }\n        });\n        return { left: this.countLeft, center: this.countCenter, right: this.countRight };\n    }\n\n    evaluateGroup(referenceList) {\n        let biasScore = null;\n        const firstRef = referenceList[0];\n\n        referenceList.forEach(ref => {\n            const href = ref.childNodes[0].getAttribute(\"href\").slice(1);\n            let isBasicCitation = !(/FOOTNOTE/.test(href));\n\n            // Only standard citations for now\n            if (isBasicCitation) {\n                const innerHTML = document.getElementById(href)?.childNodes[2]?.innerHTML || \"\";\n                for (const sourceName in sources) {\n                    const source = sources[sourceName];\n                    if (innerHTML.includes(source.url)) {\n                        const bias = source.bias;\n                        if (bias === \"center\" && biasScore == null) {\n                            biasScore = 0; this.countCenter++;\n                        }\n                        if (bias === \"left\") { biasScore--; this.countLeft++; }\n                        if (bias === \"center left\") { biasScore -= 0.5; this.countCenterLeft++; }\n                        if (bias === \"center right\") { biasScore += 0.5; this.countCenterRight++; }\n                        if (bias === \"right\") { biasScore++; this.countRight++; }\n                        break;\n                    }\n                }\n            }\n            else {\n                // Handle complete citations if needed\n                console.warn(\"Complete citation handling is not implemented yet.\");\n            }\n\n            \n        });\n\n        if (biasScore !== null) {\n            const bias = biasScore < 0 ? \"left\" : biasScore > 0 ? \"right\" : \"center\";\n            colorizeCitation(firstRef, bias);\n        }\n    }\n}\n", "const browserAPI = typeof browser !== \"undefined\" ? browser : chrome;\n\nexport default browserAPI;\n", "import browserAPI from \"../shared/browserAPI.js\";\n\nexport function sendState(title, counts) {\n    return browserAPI.runtime.sendMessage({\n        greeting: \"Content Script\",\n        data: { title, left: counts.left, center: counts.center, right: counts.right }\n    });\n}\n\nexport function onMessage(callback) {\n    browserAPI.runtime.onMessage.addListener(callback);\n}\n", "import { getArticleTitle, getReferences } from \"./domService.js\";\nimport { BiasEvaluator } from \"./biasEvaluator.js\";\nimport { sendState, onMessage } from \"./messaging.js\";\n\nconst articleTitle = getArticleTitle();\nconst references = getReferences();\n\nconst evaluator = new BiasEvaluator();\nconst counts = evaluator.evaluateReferences(references);\n\nconsole.log(`Bias summary: Left=${counts.left}, Center=${counts.center}, Right=${counts.right}`);\n\nsendState(articleTitle, counts);\n\nonMessage(() => {\n    sendState(articleTitle, counts);\n});\n"],
  "mappings": "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",
  "names": ["sources", "counts"]
}
